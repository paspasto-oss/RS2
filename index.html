<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spektra Install – Revízny Systém v4.1</title>
    
    <link rel="icon" href="data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='%23D60000'/%3E%3Ctext x='32' y='47' fill='white' font-family='sans-serif' font-weight='900' font-size='44' text-anchor='middle'%3ER%3C/text%3E%3C/svg%3E">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #D60000;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-700: #374151;
            --gray-900: #111827;
            --success: #16a34a;
        }

        body {
            background-color: #cbd5e1;
            font-family: 'Roboto', sans-serif;
            margin: 0; padding: 0;
            color: var(--gray-900);
        }

        /* === LAYOUT === */
        .app-container {
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 20px;
            max-width: 1500px;
            margin: 0 auto;
            padding: 20px;
            height: 100vh;
            box-sizing: border-box;
        }

        .controls {
            background: white;
            padding: 20px;
            border-radius: 12px;
            overflow-y: auto;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .form-group { display: flex; flex-direction: column; gap: 4px; }
        label { font-size: 10px; font-weight: 700; color: var(--gray-700); text-transform: uppercase; }
        input, select, textarea { padding: 8px; border: 1px solid var(--gray-200); border-radius: 6px; font-size: 13px; }

        .btn-primary { background: var(--primary); color: white; border: none; padding: 12px; border-radius: 6px; font-weight: 700; cursor: pointer; margin-top: 10px; }
        
        /* === PREVIEW A4 === */
        .preview-container {
            overflow-y: auto;
            display: flex;
            justify-content: center;
            padding-bottom: 40px;
        }

        .a4-page {
            width: 210mm;
            min-height: 297mm;
            background: white;
            padding: 15mm 20mm;
            box-sizing: border-box;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
        }

        /* === DESIGN PODĽA OBRÁZKA === */
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
        }

        .brand-box h1 { color: var(--primary); margin: 0; font-size: 28px; font-weight: 900; line-height: 1; }
        .brand-box span { color: var(--gray-900); }
        .brand-info { font-size: 10px; color: #555; margin-top: 5px; line-height: 1.4; }

        .report-title { text-align: right; }
        .report-title h2 { color: var(--primary); margin: 0; font-size: 22px; font-weight: 700; }
        .report-no { font-size: 16px; font-weight: 500; margin-top: 5px; }

        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }

        .info-section {
            background: #F8F9FA;
            padding: 10px;
            border-left: 4px solid var(--primary);
        }

        .info-section h3 {
            margin: 0 0 8px 0;
            font-size: 11px;
            text-transform: uppercase;
            color: var(--gray-700);
            display: flex;
            justify-content: space-between;
        }

        .info-content p { margin: 2px 0; font-size: 12px; }

        .section-header {
            background: #F3F4F6;
            padding: 6px 10px;
            font-weight: 700;
            font-size: 11px;
            text-transform: uppercase;
            margin-top: 20px;
            border-left: 4px solid var(--primary);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .data-table th, .data-table td {
            border: 1px solid #eee;
            padding: 8px 10px;
            font-size: 11px;
            text-align: left;
        }

        .data-table th {
            background: #fff;
            color: var(--gray-700);
            font-weight: 700;
        }

        .notes-area {
            border: 1px solid #eee;
            padding: 15px;
            min-height: 80px;
            font-size: 11px;
            margin-top: 10px;
            line-height: 1.5;
        }

        .status-box {
            margin: 30px auto;
            border: 2px solid var(--success);
            padding: 15px;
            text-align: center;
            font-size: 18px;
            font-weight: 900;
            color: var(--success);
            width: 80%;
            border-radius: 4px;
        }

        .legal-text {
            font-size: 9px;
            color: #777;
            text-align: justify;
            margin-top: 20px;
            line-height: 1.4;
        }

        .signature-row {
            margin-top: 60px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
        }

        .sig-col {
            width: 200px;
            text-align: center;
            font-size: 11px;
            border-top: 1px solid #000;
            padding-top: 8px;
        }

        .next-check {
            text-align: center;
            margin-top: 40px;
            font-size: 10px;
            color: #999;
        }

        /* === PRINT === */
        @media print {
            body { background: white; }
            .controls { display: none; }
            .preview-container { padding: 0; overflow: visible; }
            .a4-page { box-shadow: none; width: 100%; margin: 0; padding: 10mm; }
            .status-box { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        }
    </style>
</head>
<body>

<div class="app-container">
    <section class="controls">
        <h2 style="font-size: 16px; border-bottom: 2px solid var(--primary); padding-bottom: 5px;">Nastavenia Revízie</h2>
        
        <div class="form-group">
            <label>Zdroj tepla</label>
            <select id="sys-type" onchange="updateSystem()">
                <option value="plyn">Plynový kotol</option>
                <option value="tc">Tepelné čerpadlo</option>
                <option value="pelet">Peletový kotol</option>
            </select>
        </div>

        <div class="form-group">
            <label>Číslo správy</label>
            <input type="text" id="rep-no" value="REV-2026-001">
        </div>

        <div class="form-group">
            <label>Dátum kontroly</label>
            <input type="date" id="rep-date">
        </div>

        <div class="form-group">
            <label>Zákazník</label>
            <input type="text" id="cust-name" placeholder="Meno a Priezvisko">
            <textarea id="cust-addr" rows="2" placeholder="Adresa inštalácie"></textarea>
        </div>

        <div class="form-group">
            <label>Zariadenie</label>
            <input type="text" id="dev-model" placeholder="Značka a model">
            <input type="text" id="dev-sn" placeholder="Sériové číslo">
            <input type="text" id="dev-year" placeholder="Rok výroby">
        </div>

        <div id="dynamic-inputs" style="margin-top: 10px; border-top: 1px solid #eee; padding-top: 10px;">
            </div>

        <div class="form-group">
            <label>Výsledok</label>
            <select id="res-status" onchange="render()">
                <option value="VYHOVUJE">VYHOVUJE</option>
                <option value="NEVYHOVUJE">NEVYHOVUJE</option>
            </select>
        </div>

        <button class="btn-primary" onclick="window.print()">GENEROVAŤ PDF (TLAČ)</button>
    </section>

    <section class="preview-container">
        <div class="a4-page" id="doc">
            
            <div class="header-top">
                <div class="brand-box">
                    <h1>SPEKTRA <span>INSTALL</span></h1>
                    <div class="brand-info">
                        Hollého 210, 015 01 Rajec<br>
                        IČO: 53690036 | DPH: 23%
                    </div>
                </div>
                <div class="report-title">
                    <h2>SPRÁVA O SERVISE A KONTROLE</h2>
                    <div class="report-no" id="out-rep-no">Číslo: REV-2026-001</div>
                </div>
            </div>

            <div class="info-grid">
                <div class="info-section">
                    <h3>PREVÁDZKOVATEĽ / MIESTO INŠTALÁCIE</h3>
                    <div class="info-content">
                        <p><strong id="out-cust-name">—</strong></p>
                        <p id="out-cust-addr">—</p>
                    </div>
                </div>
                <div class="info-section">
                    <h3>ZARIADENIE</h3>
                    <div class="info-content">
                        <p>Typ: <strong id="out-dev-model">—</strong></p>
                        <p>S/N: <span id="out-dev-sn">—</span></p>
                        <p>Rok výroby: <span id="out-dev-year">—</span></p>
                    </div>
                </div>
            </div>

            <div class="section-header">VYKONANÉ ÚKONY A MERANIA</div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th style="width: 40%;">Parameter kontroly / Meranie</th>
                        <th style="width: 30%;">Nameraná hodnota / Stav</th>
                        <th style="width: 30%;">Norma / Limit</th>
                    </tr>
                </thead>
                <tbody id="out-table"></tbody>
            </table>

            <div class="section-header">ZISTENÉ NEDOSTATKY / POZNÁMKY</div>
            <div class="notes-area" id="out-notes">
                Zariadenie nevykazuje žiadne zjavné vady. Bola vykonaná funkčná skúška bezpečnostných prvkov a kontrola tesnosti spojov.
            </div>

            <div class="status-box" id="out-status-box">
                ZARIADENIE: <span id="out-status-text">VYHOVUJE</span>
            </div>

            <div class="legal-text">
                Táto správa slúži ako doklad o vykonaní pravidelnej technickej kontroly v zmysle zákona č. 314/2012 Z.z. o pravidelnej kontrole vykurovacích systémov a klimatizačných systémov. Kontrola nezbavuje prevádzkovateľa povinnosti vykonávať odborné prehliadky a skúšky vyhradených technických zariadení podľa vyhlášky 508/2009 Z.z.
            </div>

            <div class="signature-row">
                <div class="sig-col">Prevádzkovateľ (podpis)</div>
                <div class="sig-col">
                    <strong style="font-size: 12px;">Pavol Pastorek</strong><br>
                    Servisný technik (Spektra Install)
                </div>
            </div>

            <div class="next-check">
                Dátum nasledujúcej kontroly: <span id="out-next-date">13. 2. 2027</span>
            </div>

        </div>
    </section>
</div>

<script>
    const CONFIG = {
        plyn: {
            measures: [
                { l: "Vstupný tlak plynu", u: "mbar", lim: "18 - 25", def: "21" },
                { l: "Koncentrácia CO (emisie)", u: "ppm", lim: "< 100", def: "15" },
                { l: "Teplota spalín", u: "°C", lim: "max 80", def: "45" },
                { l: "Tlak v expanznej nádobe", u: "bar", lim: "1.0 - 1.5", def: "1.2" },
                { l: "Ionizačný prúd", u: "µA", lim: "> 5", def: "22" }
            ]
        },
        tc: {
            measures: [
                { l: "Kontrola tesnosti okruhu", u: "stav", lim: "bez úniku", def: "v poriadku" },
                { l: "Tlak vykurovacej vody", u: "bar", lim: "1.2 - 2.0", def: "1.5" },
                { l: "Prietok (flow rate)", u: "l/min", lim: "> 15", def: "24.2" },
                { l: "Teplotný spád (Delta T)", u: "K", lim: "3 - 8", def: "5" },
                { l: "Odber kompresora", u: "A", lim: "I-nom", def: "7.8" }
            ]
        },
        pelet: {
            measures: [
                { l: "Komínový ťah", u: "Pa", lim: "15 - 25", def: "19" },
                { l: "Úroveň zvyškového O2", u: "%", lim: "8 - 12", def: "9.8" },
                { l: "Stav spaľovacej komory", u: "stav", lim: "vyčistená", def: "OK" },
                { l: "Funkcia zapaľovača", u: "stav", lim: "bez závad", def: "OK" },
                { l: "Teplota vratnej vody", u: "°C", lim: "> 55", def: "62" }
            ]
        }
    };

    function updateSystem() {
        const type = document.getElementById('sys-type').value;
        const container = document.getElementById('dynamic-inputs');
        container.innerHTML = '<label style="margin-bottom:10px; display:block">Namerané Hodnoty</label>';
        
        CONFIG[type].measures.forEach((m, i) => {
            container.innerHTML += `
                <div class="form-group" style="margin-bottom:8px">
                    <label style="color:#666">${m.l}</label>
                    <input type="text" id="val-${i}" value="${m.def}" oninput="render()">
                </div>
            `;
        });
        render();
    }

    function render() {
        // Mapovanie vstupov na výstup
        document.getElementById('out-rep-no').textContent = "Číslo: " + document.getElementById('rep-no').value;
        document.getElementById('out-cust-name').textContent = document.getElementById('cust-name').value || "—";
        document.getElementById('out-cust-addr').textContent = document.getElementById('cust-addr').value || "—";
        document.getElementById('out-dev-model').textContent = document.getElementById('dev-model').value || "—";
        document.getElementById('out-dev-sn').textContent = document.getElementById('dev-sn').value || "—";
        document.getElementById('out-dev-year').textContent = document.getElementById('dev-year').value || "—";

        // Status a farby
        const status = document.getElementById('res-status').value;
        const statusBox = document.getElementById('out-status-box');
        document.getElementById('out-status-text').textContent = status;
        
        if(status === "VYHOVUJE") {
            statusBox.style.borderColor = "var(--success)";
            statusBox.style.color = "var(--success)";
        } else {
            statusBox.style.borderColor = "var(--primary)";
            statusBox.style.color = "var(--primary)";
        }

        // Tabuľka
        const type = document.getElementById('sys-type').value;
        const tbody = document.getElementById('out-table');
        tbody.innerHTML = '';
        
        CONFIG[type].measures.forEach((m, i) => {
            const val = document.getElementById(`val-${i}`) ? document.getElementById(`val-${i}`).value : m.def;
            tbody.innerHTML += `
                <tr>
                    <td>${m.l}</td>
                    <td><strong>${val} ${m.u}</strong></td>
                    <td style="color:#666">${m.lim}</td>
                </tr>
            `;
        });

        // Dátum nasledujúcej kontroly
        const repDate = document.getElementById('rep-date').value;
        if(repDate) {
            const d = new Date(repDate);
            d.setFullYear(d.getFullYear() + 1);
            document.getElementById('out-next-date').textContent = `${d.getDate()}. ${d.getMonth() + 1}. ${d.getFullYear()}`;
        }
    }

    // Init
    document.getElementById('rep-date').value = new Date().toISOString().split('T')[0];
    updateSystem();

    // Listenery pre statické polia
    document.querySelectorAll('#rep-no, #cust-name, #cust-addr, #dev-model, #dev-sn, #dev-year, #rep-date').forEach(el => {
        el.addEventListener('input', render);
    });
</script>

</body>
</html>
