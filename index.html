<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spektra Install ‚Äì Gener√°tor Rev√≠znych Spr√°v v4.0</title>
    
    <link rel="icon" href="data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='%23D60000'/%3E%3Ctext x='32' y='47' fill='white' font-family='sans-serif' font-weight='900' font-size='44' text-anchor='middle'%3ER%3C/text%3E%3C/svg%3E">

    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary: #D60000;
            --primary-dark: #a50000;
            --gray-50: #F9FAFB;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-700: #374151;
            --gray-900: #111827;
            --success: #16a34a;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        body {
            background-color: var(--gray-100);
            font-family: 'Roboto', sans-serif;
            margin: 0; padding: 0;
            color: var(--gray-900);
            line-height: 1.35;
        }

        .app-container {
            display: grid;
            grid-template-columns: 420px 1fr;
            gap: 24px;
            max-width: 1450px;
            margin: 0 auto;
            padding: 20px;
            height: 100vh;
            box-sizing: border-box;
        }

        /* OVL√ÅDANIE */
        .controls {
            background: white;
            padding: 20px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .controls h2 { font-size: 18px; margin: 0 0 10px 0; border-left: 4px solid var(--primary); padding-left: 10px; }

        .form-group { display: flex; flex-direction: column; gap: 4px; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        
        label { font-size: 10px; font-weight: 700; color: var(--gray-700); text-transform: uppercase; }
        
        input, select, textarea {
            padding: 8px;
            border: 1px solid var(--gray-200);
            border-radius: 6px;
            font-size: 13px;
        }

        .btn-group { margin-top: 20px; display: flex; gap: 8px; }
        button { padding: 10px; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; }
        .btn-primary { background: var(--primary); color: white; flex: 1; }
        .btn-secondary { background: var(--gray-200); flex: 1; }

        /* PREVIEW */
        .preview-container {
            background: #cbd5e1;
            border-radius: 16px;
            padding: 30px;
            overflow-y: auto;
            display: flex;
            justify-content: center;
        }

        .a4-page {
            width: 210mm;
            min-height: 297mm;
            background: white;
            padding: 15mm;
            box-sizing: border-box;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        /* ≈†T√ùL SPR√ÅVY */
        .rep-header { display: flex; justify-content: space-between; border-bottom: 2px solid var(--primary); padding-bottom: 10px; margin-bottom: 20px; }
        .rep-title { text-align: right; }
        .rep-title h1 { margin: 0; font-size: 20px; color: var(--primary); }
        
        .section-title { 
            background: var(--gray-100); 
            padding: 4px 8px; 
            font-weight: 700; 
            font-size: 12px; 
            text-transform: uppercase; 
            margin-top: 15px; 
            border-left: 3px solid var(--primary);
        }

        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 10px; }
        .info-box p { margin: 2px 0; font-size: 11px; }
        .info-box strong { font-size: 12px; }

        .data-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .data-table th, .data-table td { border: 1px solid var(--gray-200); padding: 6px; font-size: 11px; text-align: left; }
        .data-table th { background: #f9fafb; }

        .result-box { 
            margin-top: 20px; 
            padding: 15px; 
            border: 2px solid var(--primary); 
            text-align: center;
            font-weight: 700;
        }

        .footer-sigs { margin-top: 50px; display: flex; justify-content: space-between; }
        .sig-box { border-top: 1px solid #000; width: 200px; text-align: center; font-size: 10px; padding-top: 5px; }

        @media print {
            body { background: white; }
            .controls { display: none; }
            .preview-container { padding: 0; background: white; }
            .a4-page { box-shadow: none; width: 100%; margin: 0; }
        }
    </style>
</head>
<body>

<div class="app-container">
    <section class="controls">
        <h2>Rev√≠zny Protokol</h2>
        
        <div class="form-group">
            <label>Typ Zariadenia</label>
            <select id="sys-type" onchange="updateFields()">
                <option value="plyn">Plynov√Ω kondenzaƒçn√Ω kotol</option>
                <option value="tc">Tepeln√© ƒçerpadlo (Vzduch-Voda)</option>
                <option value="pelet">Kotol na biomasu (Pelety)</option>
            </select>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label>ƒå√≠slo spr√°vy</label>
                <input type="text" id="rep-no" value="REV-2026-001">
            </div>
            <div class="form-group">
                <label>D√°tum kontroly</label>
                <input type="date" id="rep-date">
            </div>
        </div>

        <hr>
        <div class="form-group">
            <label>Z√°kazn√≠k / Adresa</label>
            <input type="text" id="cust-name" placeholder="Meno a priezvisko">
            <textarea id="cust-addr" rows="2" placeholder="Adresa in≈°tal√°cie"></textarea>
        </div>

        <hr>
        <div class="form-group">
            <label>√ödaje o zariaden√≠</label>
            <input type="text" id="dev-brand" placeholder="V√Ωrobca a model (napr. Viessmann L200)">
            <input type="text" id="dev-sn" placeholder="S√©riov√© ƒç√≠slo">
            <input type="text" id="dev-year" placeholder="Rok v√Ωroby">
        </div>

        <hr>
        <div id="dynamic-inputs">
            </div>

        <div class="form-group">
            <label>Celkov√Ω v√Ωsledok</label>
            <select id="res-status">
                <option value="VYHOVUJE">SCHOPN√â BEZPEƒåNEJ PREV√ÅDZKY</option>
                <option value="NEVYHOVUJE">NESCHOPN√â PREV√ÅDZKY (Potrebn√° oprava)</option>
            </select>
        </div>

        <div class="btn-group">
            <button class="btn-primary" onclick="window.print()">üñ®Ô∏è Tlaƒçi≈• Protokol</button>
            <button class="btn-secondary" onclick="location.reload()">‚Ü∫ Reset</button>
        </div>
    </section>

    <section class="preview-container">
        <div class="a4-page" id="doc">
            <div class="rep-header">
                <div>
                    <strong style="color:var(--primary); font-size: 22px;">SPEKTRA INSTALL</strong><br>
                    <span style="font-size: 10px;">Holl√©ho 210, 015 01 Rajec | IƒåO: 53690036</span>
                </div>
                <div class="rep-title">
                    <h1>SPR√ÅVA O SERVISE A KONTROLE</h1>
                    <span id="out-rep-no">ƒå√≠slo: REV-2026-001</span>
                </div>
            </div>

            <div class="info-grid">
                <div class="info-box">
                    <div class="section-title">Prev√°dzkovateƒæ / Miesto in≈°tal√°cie</div>
                    <p><strong id="out-cust-name">J√°n Nov√°k</strong></p>
                    <p id="out-cust-addr">Ulica 1, 010 01 ≈Ωilina</p>
                </div>
                <div class="info-box">
                    <div class="section-title">Zariadenie</div>
                    <p>Typ: <strong id="out-dev-brand">-</strong></p>
                    <p>S/N: <span id="out-dev-sn">-</span></p>
                    <p>Rok v√Ωroby: <span id="out-dev-year">-</span></p>
                </div>
            </div>

            <div class="section-title">Vykonan√© √∫kony a merania</div>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>Parameter kontroly / Meranie</th>
                        <th>Nameran√° hodnota / Stav</th>
                        <th>Norma / Limit</th>
                    </tr>
                </thead>
                <tbody id="out-measurements">
                    </tbody>
            </table>

            <div class="section-title">Zisten√© nedostatky / Pozn√°mky</div>
            <div style="min-height: 60px; border: 1px solid var(--gray-200); margin-top: 5px; padding: 10px; font-size: 11px;" id="out-notes">
                Zariadenie nevykazuje ≈æiadne zjavn√© vady. Bola vykonan√° funkƒçn√° sk√∫≈°ka bezpeƒçnostn√Ωch prvkov.
            </div>

            <div class="result-box" id="out-res-box">
                ZARIADENIE: <span id="out-res-status">VYHOVUJE</span>
            </div>

            <p style="font-size: 9px; color: #666; margin-top: 20px; text-align: justify;">
                T√°to spr√°va sl√∫≈æi ako doklad o vykonan√≠ pravidelnej technickej kontroly v zmysle z√°kona ƒç. 314/2012 Z.z. o pravidelnej kontrole vykurovac√≠ch syst√©mov a klimatizaƒçn√Ωch syst√©mov. Kontrola nezbavuje prev√°dzkovateƒæa povinnosti vykon√°va≈• odborn√© prehliadky a sk√∫≈°ky vyhraden√Ωch technick√Ωch zariaden√≠ podƒæa vyhl√°≈°ky 508/2009 Z.z.
            </p>

            <div class="footer-sigs">
                <div class="sig-box">Prev√°dzkovateƒæ (podpis)</div>
                <div class="sig-box">
                    <strong>Pavol Pastorek</strong><br>
                    Servisn√Ω technik (Spektra Install)
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 30px; font-size: 10px; color: #999;">
                D√°tum nasleduj√∫cej kontroly: <span id="out-next-date">Febru√°r 2027</span>
            </div>
        </div>
    </section>
</div>

<script>
    const CONFIG = {
        plyn: {
            title: "Plynov√Ω kondenzaƒçn√Ω kotol",
            measures: [
                { label: "Vstupn√Ω tlak plynu", unit: "mbar", limit: "18 - 25", default: "21" },
                { label: "Koncentr√°cia CO (emisie)", unit: "ppm", limit: "< 100", default: "15" },
                { label: "Teplota spal√≠n", unit: "¬∞C", limit: "max 80", default: "45" },
                { label: "Tlak v expanznej n√°dobe", unit: "bar", limit: "1.0 - 1.5", default: "1.2" },
                { label: "Ionizaƒçn√Ω pr√∫d", unit: "¬µA", limit: "> 5", default: "22" }
            ]
        },
        tc: {
            title: "Tepeln√© ƒçerpadlo",
            measures: [
                { label: "Tlak chladiva (High)", unit: "bar", limit: "podƒæa R32/R290", default: "24" },
                { label: "Kontrola tesnosti okruhu", unit: "Stav", limit: "Bez √∫niku", default: "Tesn√©" },
                { label: "Pr√∫d kompresora (L1)", unit: "A", limit: "max I-nom", default: "8.2" },
                { label: "Prietok vykurovacej vody", unit: "l/min", limit: "min 12", default: "22.5" },
                { label: "Teplotn√Ω sp√°d (Delta T)", unit: "K", limit: "3 - 7", default: "5" }
            ]
        },
        pelet: {
            title: "Kotol na pelety / biomasu",
            measures: [
                { label: "Kom√≠nov√Ω ≈•ah", unit: "Pa", limit: "15 - 25", default: "18" },
                { label: "Kvalita horenia (O2)", unit: "%", limit: "8 - 12", default: "9.5" },
                { label: "Stav zapaƒæovacieho prvku", unit: "O odpor", limit: "funkƒçn√Ω", default: "OK" },
                { label: "Mechanizmus pod√°vaƒça", unit: "Stav", limit: "priechodn√Ω", default: "OK" },
                { label: "Teplota vratnej vody", unit: "¬∞C", limit: "> 55 (ochrana)", default: "60" }
            ]
        }
    };

    function updateFields() {
        const type = document.getElementById('sys-type').value;
        const container = document.getElementById('dynamic-inputs');
        container.innerHTML = '<h4>Nameran√© hodnoty</h4>';
        
        CONFIG[type].measures.forEach((m, index) => {
            container.innerHTML += `
                <div class="form-group" style="margin-bottom:8px">
                    <label>${m.label} (${m.unit})</label>
                    <input type="text" id="m-${index}" value="${m.default}" oninput="render()">
                </div>
            `;
        });
        render();
    }

    function render() {
        // Z√°kladn√© √∫daje
        document.getElementById('out-rep-no').textContent = "ƒå√≠slo: " + document.getElementById('rep-no').value;
        document.getElementById('out-cust-name').textContent = document.getElementById('cust-name').value || "‚Äî";
        document.getElementById('out-cust-addr').textContent = document.getElementById('cust-addr').value || "‚Äî";
        document.getElementById('out-dev-brand').textContent = document.getElementById('dev-brand').value || "‚Äî";
        document.getElementById('out-dev-sn').textContent = document.getElementById('dev-sn').value || "‚Äî";
        document.getElementById('out-dev-year').textContent = document.getElementById('dev-year').value || "‚Äî";
        
        // V√Ωsledok
        const status = document.getElementById('res-status').value;
        const resBox = document.getElementById('out-res-box');
        document.getElementById('out-res-status').textContent = status;
        resBox.style.borderColor = status === "VYHOVUJE" ? "var(--success)" : "var(--primary)";
        resBox.style.color = status === "VYHOVUJE" ? "var(--success)" : "var(--primary)";

        // Tabuƒæka meran√≠
        const type = document.getElementById('sys-type').value;
        const tbody = document.getElementById('out-measurements');
        tbody.innerHTML = '';
        
        CONFIG[type].measures.forEach((m, index) => {
            const val = document.getElementById(`m-${index}`) ? document.getElementById(`m-${index}`).value : m.default;
            tbody.innerHTML += `
                <tr>
                    <td>${m.label}</td>
                    <td><strong>${val} ${m.unit}</strong></td>
                    <td style="color:#666">${m.limit}</td>
                </tr>
            `;
        });

        // Nasleduj√∫ca kontrola
        const dateVal = document.getElementById('rep-date').value;
        if(dateVal) {
            const d = new Date(dateVal);
            d.setFullYear(d.getFullYear() + 1);
            document.getElementById('out-next-date').textContent = d.toLocaleDateString('sk-SK');
        }
    }

    // Inicializ√°cia
    document.getElementById('rep-date').value = new Date().toISOString().split('T')[0];
    updateFields();

    // Event listenery pre v≈°etky statick√© polia
    document.querySelectorAll('input, select, textarea').forEach(el => {
        el.addEventListener('input', render);
    });
</script>

</body>
</html>
